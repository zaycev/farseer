{% extends "base.html" %}
{% block page-title %}Collector | Application Index{% endblock %}
{% block page-content %}

	{% include "collector/collector_navbar.html" %}


	<div class="row-fluid">


		<div class="span3">
			{% include "collector/service_list.html" %}
			{% include "collector/dataset_list.html" %}
		</div>

		<div class="span8">
			<div class="page-header">
				<h1>{{ active.name }}</h1>
			</div>


			<div class="row-fluid">
				<div>
					<h3>
						<img style="margin:-5px 4px 0 0;" src="/www/icons/database.png">
						RawRiver
					</h3>
					<table class="table table-striped table-bordered table-condensed">
						<tbody style="font-family:'Menlo', 'Monaco', 'Consolas', 'Courier', monospace;">
							<tr>
								<td><strong>Total Objects</strong></td>
								<td>{{ active.rawriver_set.count }}</td>
								<td><strong>Mime types</strong></td>
								<td>
									{% for mime_type in active.mime_types %}
										<code>{{ mime_type.mime_type }}</code>({{ mime_type.count }}){% if not forloop.last %},{% endif %}
									{% endfor %}
								</td>
							</tr>
							<tr>
								<td colspan="3">
									<strong>Sources</strong>
								</td>
								<td>
									{% for source in active.counted_sources %}
										<a href="{{ source.source.url }}">
											{{ source.source.name }}</a>({{ source.rawrivers }}){% if not forloop.last %},{% endif %}
									{% endfor %}
								</td>
							</tr>
							<tr>
								<td colspan="3">
									<strong>Collecting Period</strong>
								</td>
								<td>
									<code>{{ active.collecting_period.since|date:"Y.m.d H:i:s" }}</code> -
									<code>{{ active.collecting_period.to|date:"Y.m.d H:i:s" }}</code>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>


		</div>

	</div>

{% endblock %}